/* --- Base Styles --- */
html,
body {
    font-family: montserrat, sans-serif;
    margin: 0;
    padding: 0;
    background: transparent;
    color: #f0f0f0;
    overflow: hidden !important;
    /* Mantenuto per la rimozione della scrollbar */
}

/* Scrollbar hiding for WebKit browsers */
body::-webkit-scrollbar {
    display: none;
    width: 0px;
    background: transparent;
}

/* Scrollbar hiding for Firefox */
html {
    scrollbar-width: none;
}

.container {
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
}

/* --- Headings --- */
h2 {
    background-color: #434343;
    padding: 10px 10px 8px 12px;
    margin: 40px 0px 20px 0px;
    border-radius: 10px;
    font-size: 2.5em;
    text-transform: uppercase;
    font-variant: small-caps;
    font-family: montserrat, sans-serif;
    color: #f0f0f0;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

h3 {
    border-bottom: 1px solid rgba(240, 240, 240, 0.21);
    padding-bottom: 5px;
    margin-top: 30px;
    margin-bottom: 15px;
    font-size: 28px;
    font-family: montserrat, sans-serif;
    color: #f0f0f0;
    font-weight: 500;
}

h4 {
    padding-bottom: 2px;
    margin-bottom: 10px;
    margin-top: 20px;
    font-size: 22px;
    font-family: montserrat, sans-serif;
    color: #f0f0f0;
    font-weight: 500;
}

.main-heading-line {
    display: block;
    text-transform: uppercase;
    font-variant: small-caps;
}

.sub-heading-line {
    display: block;
    font-size: 0.8em;
    margin-top: 5px;
    text-transform: capitalize;
    font-variant: normal;
    font-weight: normal;
}

/* --- Text and Lists --- */
p,
li {
    line-height: 1.6;
    font-family: montserrat, sans-serif;
    font-weight: 400;
    color: #f0f0f0;
    font-size: 0.9rem;
}

ul,
ol {
    padding-left: 25px;
    margin-top: 0;
}

ul {
    list-style-type: disc !important;
    /* Mantenuto per specificità */
    margin-left: 20px !important;
    /* Mantenuto per specificità */
    padding-left: 0 !important;
    /* Mantenuto per specificità */
    margin-top: 0 !important;
    /* Mantenuto per specificità */
    margin-bottom: 0 !important;
    /* Mantenuto per specificità */
}

/* Ho rimosso ul .examples perché ul da solo dovrebbe bastare per lo stile della lista.
   Se hai bisogno di ul.examples per uno stile diverso, riaggiungilo,
   ma senza !important se ul ha già le regole desiderate. */

li {
    margin-bottom: 8px;
}

b,
strong {
    font-weight: bold;
    color: #ffffff;
}

dl {
    margin-top: 15px;
    margin-bottom: 15px;
    padding-left: 20px;
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    line-height: 1.5;
    font-size: 0.9rem;
}

dt {
    display: list-item;
    list-style-type: none;
    font-weight: bold;
    margin-left: 0;
    margin-bottom: 5px;
    color: #f0f0f0;
    font-size: 0.9rem;
}

dd {
    margin-left: 20px;
    margin-bottom: 10px;
    color: #f0f0f0;
    font-weight: normal;
    font-size: 0.9rem;
}

dl dd b,
dl dd strong {
    font-weight: bold;
    font-size: 0.9rem;
}

.example-text {
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    line-height: 1.6;
    margin-bottom: 10px;
    font-size: 0.9em;
}

/* --- Table Styles --- */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    margin-bottom: 20px;
    background-color: #3d3d3d;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    overflow: hidden;
}

th,
td {
    border: 1px solid #555555;
    padding: 12px 15px;
    text-align: left;
    font-size: 0.85rem;
}

td:nth-child(n+2) {
    /* Target CXP, SXP, EXP columns */
    text-align: center;
}

thead th {
    background-color: #4a4a4a;
    font-weight: bold;
    font-size: 0.9em;
    text-transform: uppercase;
}

tbody tr:nth-child(even) {
    background-color: #424242;
}

tbody tr:hover {
    background-color: #505050;
}

/* --- Special Blocks --- */
.designer-note,
.example-block,
.quick-reference {
    background-color: #3a3a3a;
    border-left: 4px solid #777;
    padding: 15px 20px;
    margin: 20px 0;
    border-radius: 0 8px 8px 0;
}

.designer-note p:first-child,
.example-block p:first-child,
.quick-reference p:first-child {
    margin-top: 0;
}

.designer-note p:last-child,
.example-block p:last-child,
.quick-reference p:last-child {
    margin-bottom: 0;
}

.designer-note strong,
.example-block strong {
    color: #ddd;
    font-variant: small-caps;
}

/* --- TOOLTIP STYLES --- */
.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted #a0a0a0;
    cursor: help;
}

.tooltip-trigger {
    cursor: help;
    border-bottom: 1px dotted rgba(240, 240, 240, 0.21);
    transition: border-bottom 0.2s ease-in-out;
    padding-bottom: 1px;
}

.tooltip-trigger:hover {
    border-bottom: 1px dotted #3fdada;
    color: #3fdada;
}

.global-tooltip {
    position: absolute;
    background-color: #434343;
    color: #f0f0f0;
    padding: 10px 40px 10px 15px;
    border-radius: 5px;
    border: 1px solid #f0f0f0;
    box-shadow: 0 4px 8px 10px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    transition: opacity 0.3s ease-in-out;
    max-width: 250px;
    text-align: left;
    font-size: 0.7em;
    line-height: 1.4;
    font-family: montserrat, sans-serif;
    display: block;
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
}

.tooltip-icon {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 22px;
    height: 22px;
    color: #f0f0f0;
    z-index: 1001;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tooltip-icon svg {
    width: 100%;
    height: 100%;
}

.tooltip-content-wrapper {
    /* No specific styles needed here based on provided CSS */
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: 280px;
    background-color: #2a2a2a;
    color: #f0f0f0;
    text-align: left;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 10px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -140px;
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 0.9rem;
    line-height: 1.4;
    font-weight: 400;
}

.tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
}

/* --- Outcome/Columns Styles --- */
.outcome-container {
    display: flex;
    gap: 20px;
    margin-top: 30px;
    flex-wrap: wrap;
    justify-content: center;
}

.outcome-box {
    background-color: #484848;
    border-radius: 10px;
    padding: 20px;
    flex: 1;
    min-width: 250px;
    box-sizing: border-box;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    border: 1px solid transparent;
    transition: border-color 0.3s ease-in-out;
}

.outcome-box.success {
    border-color: #25a55a;
}

.outcome-box.failure {
    border-color: #ce261a;
}

.outcome-box p {
    margin: 4px 0;
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    line-height: 1.2;
}

.outcome-text-standard {
    font-size: 0.9em;
    font-weight: 400;
}

.outcome-text-emphasized {
    font-size: 1.4em;
    font-weight: bold;
    text-transform: uppercase;
    color: #f0f0f0;
}

.action-dice-label {
    font-weight: bold;
    color: #f0f0f0;
}

.outcome-text-highlight {
    font-size: 1.4em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-top: 10px;
}

.success-color {
    color: #25a55a !important;
}

.failure-color {
    color: #ce261a !important;
}

.text-icon {
    width: 1.5rem;
    height: 1.5rem;
    vertical-align: bottom;
}

/* --- Collapsible Item Styles --- */
.collapsible-item {
    background-color: #484848;
    border-radius: 10px;
    margin-top: 25px;
    overflow: hidden;
    width: 100%;
    box-sizing: border-box;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.collapsible-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    cursor: pointer;
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    font-weight: bold;
    font-size: 1.2em;
    transition: background-color 0.2s ease-in-out;
}

.collapsible-header:hover {
    background-color: #555555;
}

.collapsible-title {
    flex-grow: 1;
}

.collapsible-icon {
    width: 24px;
    height: 24px;
    margin-left: 10px;
    transition: transform 0.3s ease-in-out;
    display: flex;
    align-items: center;
    justify-content: center;
}

.collapsible-icon svg path {
    fill: #f0f0f0;
}

.collapsible-item.expanded .collapsible-icon {
    transform: rotate(90deg);
}

.collapsible-content {
    height: 0;
    overflow: hidden;
    transition: height 0.5s ease-in-out, padding 0.5s ease-in-out;
    padding: 0 20px;
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    box-sizing: border-box;
    font-size: 0.9rem;
}

.collapsible-content.expanded-content {
    padding: 15px 20px;
    padding-top: 0;
}

.collapsible-content ul {
    list-style-type: disc;
    margin-left: 20px;
    padding-left: 0;
    margin-top: 0;
    margin-bottom: 0;
}

.collapsible-content li {
    color: #f0f0f0;
    font-family: montserrat, sans-serif;
    line-height: 1.6;
    margin-bottom: 10px;
}

.collapsible-content li b {
    font-weight: bold;
}

/* --- Box Rule Styles --- */
.box-rule {
    background-color: #484848;
    border-radius: 10px;
    padding: 15px 20px;
    margin-top: 25px;
    color: #f0f0f0;
    position: relative;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.box-rule h4 {
    font-size: 1.3em;
    margin-top: 0;
    margin-bottom: 10px;
    font-family: montserrat, sans-serif;
    text-align: left;
}

.box-rule p {
    font-size: 0.9em;
    line-height: 1.5;
    margin-top: 0;
    margin-bottom: 0;
    font-family: montserrat, sans-serif;
}

.box-rule b,
.box-rule strong {
    font-weight: bold;
}

.box-rule-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 28px;
    height: 28px;
    z-index: 10;
    display: block;
}

/* --- Custom Grid Styles for Aptitudes --- */
.aptitude-grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-top: 20px;
    padding-bottom: 20px;
}

.aptitude-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
}

.aptitude-card {
    background-color: #484848;
    border-radius: 10px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    color: #f0f0f0;
    width: 100%;
    box-sizing: border-box;
    flex-grow: 1;
    /* Keep this for equal card height */
}

.aptitude-card:hover .icon {
    transform: scale(1.1);
}

.aptitude-card .icon {
    width: 128px;
    height: 128px;
    background-color: #555;
    border-radius: 8px;
    /* margin-bottom: 15px; */
    /* Commented out as margin: 20px auto seems to override it */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5em;
    color: #f0f0f0;
    border: 1px solid rgba(240, 240, 240, 0.21);
    margin: 20px auto;
    /* Shortened shorthand */
    transition: all 0.5s ease-out;
    overflow: auto;
}

.aptitude-card .icon img {
    width: 128px;
    height: 128px;
}

.aptitude-card h4 {
    font-size: 1.4em;
    margin-top: 0;
    margin-bottom: 10px;
    /* This was !important, but now it's just 10px, check if you need !important back */
    color: #f0f0f0;
    border-bottom: none;
    text-transform: uppercase;
    text-align: center;
    margin: 0 auto !important;
    /* Mantenuto !important perché hai `margin: 0px auto 0px auto !important;` */
}

.aptitude-card p {
    font-size: 0.85em;
    line-height: 1.5;
    margin-bottom: 10px;
}

.aptitude-card .tags {
    font-size: 0.8em;
    color: #ccc;
    margin-top: auto;
}

.aptitude-category-title {
    font-size: 1.3em !important;
    /* Mantenuto !important */
    margin-bottom: -20px !important;
    /* Mantenuto !important */
    color: #f0f0f0;
    border-bottom: none !important;
    /* Mantenuto !important */
    padding-bottom: 5px;
    width: 100%;
    grid-column: 1 / -1;
    text-transform: uppercase;
}

.aptitude-category-description {
    line-height: 1.6;
    margin-bottom: 0px;
    color: #f0f0f0;
    grid-column: 1 / -1;
}

.polarity-block {
    display: flex;
    align-items: flex-start;
    margin-bottom: 20px;
    padding-left: 20px;
}

.polarity-block .polarity-icon-wrapper {
    width: 128px;
    height: 128px;
    margin: 20px 20px 20px auto;
    flex-shrink: 0;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    background-color: #484848;
    border-radius: 10px;
    padding: 5px;
    flex-direction: column;
    align-items: flex-start;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    color: #f0f0f0;
}

.polarity-block .polarity-icon-wrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.7));
}

.polarity-text-content {
    flex-grow: 1;
}

/* New style for the description wrapper (UNCHANGED, but essential for card height) */
/* Questa regola era posizionata in un punto strano, l'ho spostata vicino a .aptitude-card */
.aptitude-card .aptitude-description-container {
    flex-grow: 1;
    margin-bottom: 10px;
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    h2 {
        font-size: 1.8em;
        padding: 8px 10px;
    }

    h3 {
        font-size: 1.5em;
    }

    h4 {
        font-size: 1.2em;
    }

    .container {
        padding: 15px;
    }

    th,
    td {
        padding: 8px 10px;
        font-size: 0.9em;
    }

    .aptitude-grid-container {
        grid-template-columns: 1fr;
        /* Una colonna per schermi piccoli */
    }

    .polarity-block {
        flex-direction: column;
        /* Impila icona e testo su schermi piccoli */
        align-items: center;
        /* Centra gli elementi impilati */
        padding-left: 0;
    }

    .polarity-block .polarity-icon-wrapper {
        margin: 0 auto 15px auto;
        /* Centra l'icona e aggiungi spazio sotto */
    }

    .aptitude-card .icon {
        margin: 15px auto 15px auto;
        /* Adjusted margins for small screens */
    }

    .tooltip .tooltiptext {
        width: 220px;
        margin-left: -110px;
    }

}

blockquote {
    font-style: italic;
    margin: 1.5em 0;
    padding: 0.5em 1.5em;
    border-left: 4px solid #ccaa00;
    /* Goldish yellow */
    background-color: #fffbe6;
    /* Light yellow background */
    color: #555;
}

blockquote footer {
    font-size: 0.9em;
    text-align: right;
    margin-top: 0.5em;
    color: #777;
}

.timeline-container {
    display: flex;
    gap: 20px;
    max-width: 1000px;
    margin: auto;
    padding: 40px 20px;
    color: #e0d7c2;
}

.timeline-nav {
    flex: 0 0 100px;
    position: sticky;
    top: 100px;
}

.timeline-nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.timeline-nav li {
    margin: 8px 0;
    font-size: 0.9em;
    cursor: pointer;
    color: #d2b48c;
}

.timeline {
    flex-grow: 1;
    position: relative;
    padding-left: 40px;
}

.timeline::before {
    content: '';
    position: absolute;
    width: 4px;
    background-color: #3a3a3a;
    top: 0;
    bottom: 0;
    left: 12px;
}

.timeline-event {
    position: relative;
    margin-bottom: 30px;
    padding-left: 40px;
    transition: background 0.3s ease;
}

.timeline-event::before {
    content: attr(data-icon);
    position: absolute;
    left: -4px;
    top: 0;
    background-color: #1c1a16;
    color: #d2b48c;
    font-size: 1.2em;
    width: 24px;
    height: 24px;
    text-align: center;
    border: 2px solid #d2b48c;
    border-radius: 50%;
    line-height: 20px;
    font-weight: bold;
}

.timeline-event h3 {
    margin: 0;
    font-size: 1.1em;
    color: #f0e6c4;
    cursor: pointer;
}

.timeline-event p {
    margin: 5px 0 0;
    font-size: 0.95em;
    color: #c4b99b;
    line-height: 1.5;
    display: none;
    transition: opacity 0.3s ease;
}

.timeline-event.expanded p {
    display: block;
}

.timeline-event:hover {
    background-color: rgba(255, 255, 255, 0.03);
    padding-left: 42px;
}

@media (max-width: 768px) {
    .timeline-container {
        flex-direction: column;
    }

    .timeline-nav {
        display: none;
    }

    .timeline {
        padding-left: 20px;
    }

    .timeline::before {
        left: 0;
    }

    .timeline-event {
        padding-left: 30px;
    }

    .timeline-event::before {
        left: -10px;
    }
}

/* Responsive grid for smaller screens */
@media (max-width: 600px) {
    .advancement-grid {
        grid-template-columns: 1fr;
        /* 1 column on small screens */
    }
}

/* --- Advancement Grid --- */
.advancement-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    /* 2 columns */
    gap: 15px;
    padding: 15px 0;
}

.advancement-item {
    background-color: #3d3d3d;
    border-radius: 8px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    border: 1px solid #555;
    min-height: 120px;
    /* Ensure items have a consistent height */
    transition: background-color 0.2s, transform 0.2s;
}

.advancement-item:hover {
    background-color: #4a4a4a;
    transform: translateY(-2px);
}

.advancement-symbol {
    width: 40px;
    height: 40px;
    border: 2px dashed #777;
    border-radius: 50%;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #888;
    font-size: 1.5em;
}

.advancement-text {
    font-size: 0.9em;
    line-height: 1.4;
    flex-grow: 1;
    display: flex;
    align-items: center;
}